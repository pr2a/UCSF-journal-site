<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login-Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="top-right-buttons">
        <a href="homepage-logged-out.html" class="login-button">Home</a>
    </div>
    <div class="container">
        <h1>Join "Website Name"</h1>
        <h2>By signing up, you agree to our Terms and have read our Privacy Policy...</h2>
        <br>
        <div style="background-color: #D9D9D9; padding: 20px; font-family: 'Inter', sans-serif;">
            <h3 style="font-size: 16px;">Create an account</h3>
            <form id="signup-form" method="post" action="https://script.google.com/macros/s/AKfycbwnbMplx7T2_Nkzh_g6TyvfuvgKPXxR38BZPF95y6UcW-MCfLQmZ0GrCMnkVY8diRx0og/exec" onsubmit="handleSubmit(event)">
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" name="firstName"><br><br>
                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName"><br><br>
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" autocomplete="new-password">
                <br><br>
                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" required><br><br>
                <label for="confirm-email">Confirm Email Address:</label>
                <input type="email" id="confirm-email" name="confirm-email" required><br><br>
                <button type="submit" style="background-color: white;">Submit</button>
            </form>
            <div style="margin-top: 20px; align: center">
                <p>Youâ€™ll use this email address when you log in and if you ever need to reset your password. (this needs to be changed)</p>
            </div>
            <a href="confirm-email.html">
                <button type="submit" style="background-color: white;">Submit</button>
            </a>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
            <a href="login.html" style="color: #9F9F9F; text-decoration: none;">Already have an account?</a>
        </div>
    </div>
</body>
</html>


<script>
function handleSubmit(event) {
    event.preventDefault(); // Prevent the default form submission
    const form = document.getElementById('signup-form');
    
    fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        // Additional headers if needed
    })
    .then(response => response.json()) // Parse the JSON response
    .then(data => {
        // Check if the submission was successful before redirecting
        if(data && data.result === "success") {
            window.location.href = 'confirm-email.html';
        } else {
            // Handle the case where the script did not return success
            console.error('Submission failed', data);
        }
    })
    .catch(error => {
        console.error('Error:', error);
        // Handle errors here, such as displaying a message to the user
    });
}
</script>